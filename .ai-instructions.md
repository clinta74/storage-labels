# AI Assistant Instructions - Storage Labels Project

## Overview
This project uses specific architectural patterns that MUST be followed. Do not deviate from these patterns.

## Critical Rules

### 1. DTO Constructor Mapping (NON-NEGOTIABLE)
```csharp
// ALWAYS use this pattern:
public record ItemResponse(int Id, string Name)
{
    public ItemResponse(ItemModel item) : this(item.Id, item.Name) { }
}

// NEVER use:
// - Static FromEntity() methods
// - new ItemResponse { Id = x, Name = y }
// - Manual property mapping
```

### 2. MediatR for All Business Logic
Every business operation must use MediatR with:
- Request as record implementing IRequest<Result<T>>
- Handler implementing IRequestHandler
- Validator using FluentValidation

### 3. LoggerMessage Source Generators Only
```csharp
// CORRECT:
[LoggerMessage(Message = "...", Level = LogLevel.Information)]
public static partial void MyLog(this ILogger logger, ...);

// WRONG:
logger.LogInformation($"...");
```

### 4. Route Conventions
- Parameters: camelCase with constraints (`/{boxId:guid}`)
- Names: Version suffixes for v2+ (`.WithName("Get Box V2")`)
- Always include `.Produces<T>()` declarations

### 5. File Organization
DTOs in `Models/DTO/`, internal models in `Models/`, handlers in `Handlers/`

## Search Before Creating
ALWAYS search for existing similar implementations before generating new code. Copy the pattern exactly.

## Testing Required
Run `dotnet test` immediately after any code changes.

## Full Documentation
See CONTRIBUTING.md (section "Architecture & Patterns") for complete details.

## Violation = Rejection
Code not following these patterns will fail code review. There are no exceptions.
